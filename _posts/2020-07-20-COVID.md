---
title: "Visualization of COVID-19 in Korea"
date: 2020-07-11 08:26:28 -0400
classes: wide
toc: true
driveId: 16r1GcREflDf61crBHK8zKbmNpssnI1Zz/preview
categories: Visualization ggplot plotnine
---



# Load Data

data source : kaggle https://www.kaggle.com/kimjihoo/coronavirusdataset


```python
import pandas as pd
from plotnine import *
```


```python
from mizani.breaks import date_breaks
from mizani.formatters import date_format
```


```python
from datetime import datetime
```


```python
info = pd.read_csv("COVID_PatientInfo.csv")
route = pd.read_csv("COVID_PatientRoute.csv")
policy = pd.read_csv("COVID_Policy.csv")
floating = pd.read_csv("COVID_SeoulFloating.csv")
count = pd.read_csv("COVID_TimeProvince.csv")
case = pd.read_csv("COVID_Case.csv")
time = pd.read_csv("COVID_Time.csv")
timeage = pd.read_csv("COVID_TimeAge.csv")
timegender = pd.read_csv("COVID_TimeGender.csv")
```


```python
info
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>patient_id</th>
      <th>sex</th>
      <th>age</th>
      <th>country</th>
      <th>province</th>
      <th>city</th>
      <th>infection_case</th>
      <th>infected_by</th>
      <th>contact_number</th>
      <th>symptom_onset_date</th>
      <th>confirmed_date</th>
      <th>released_date</th>
      <th>deceased_date</th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1000000001</td>
      <td>male</td>
      <td>50s</td>
      <td>Korea</td>
      <td>Seoul</td>
      <td>Gangseo-gu</td>
      <td>overseas inflow</td>
      <td>NaN</td>
      <td>75</td>
      <td>2020-01-22</td>
      <td>2020-01-23</td>
      <td>2020-02-05</td>
      <td>NaN</td>
      <td>released</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1000000002</td>
      <td>male</td>
      <td>30s</td>
      <td>Korea</td>
      <td>Seoul</td>
      <td>Jungnang-gu</td>
      <td>overseas inflow</td>
      <td>NaN</td>
      <td>31</td>
      <td>NaN</td>
      <td>2020-01-30</td>
      <td>2020-03-02</td>
      <td>NaN</td>
      <td>released</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1000000003</td>
      <td>male</td>
      <td>50s</td>
      <td>Korea</td>
      <td>Seoul</td>
      <td>Jongno-gu</td>
      <td>contact with patient</td>
      <td>2002000001</td>
      <td>17</td>
      <td>NaN</td>
      <td>2020-01-30</td>
      <td>2020-02-19</td>
      <td>NaN</td>
      <td>released</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1000000004</td>
      <td>male</td>
      <td>20s</td>
      <td>Korea</td>
      <td>Seoul</td>
      <td>Mapo-gu</td>
      <td>overseas inflow</td>
      <td>NaN</td>
      <td>9</td>
      <td>2020-01-26</td>
      <td>2020-01-30</td>
      <td>2020-02-15</td>
      <td>NaN</td>
      <td>released</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1000000005</td>
      <td>female</td>
      <td>20s</td>
      <td>Korea</td>
      <td>Seoul</td>
      <td>Seongbuk-gu</td>
      <td>contact with patient</td>
      <td>1000000002</td>
      <td>2</td>
      <td>NaN</td>
      <td>2020-01-31</td>
      <td>2020-02-24</td>
      <td>NaN</td>
      <td>released</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>5160</th>
      <td>7000000015</td>
      <td>female</td>
      <td>30s</td>
      <td>Korea</td>
      <td>Jeju-do</td>
      <td>Jeju-do</td>
      <td>overseas inflow</td>
      <td>NaN</td>
      <td>25</td>
      <td>NaN</td>
      <td>2020-05-30</td>
      <td>2020-06-13</td>
      <td>NaN</td>
      <td>released</td>
    </tr>
    <tr>
      <th>5161</th>
      <td>7000000016</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Korea</td>
      <td>Jeju-do</td>
      <td>Jeju-do</td>
      <td>overseas inflow</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2020-06-16</td>
      <td>2020-06-24</td>
      <td>NaN</td>
      <td>released</td>
    </tr>
    <tr>
      <th>5162</th>
      <td>7000000017</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Bangladesh</td>
      <td>Jeju-do</td>
      <td>Jeju-do</td>
      <td>overseas inflow</td>
      <td>NaN</td>
      <td>72</td>
      <td>NaN</td>
      <td>2020-06-18</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>isolated</td>
    </tr>
    <tr>
      <th>5163</th>
      <td>7000000018</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Bangladesh</td>
      <td>Jeju-do</td>
      <td>Jeju-do</td>
      <td>overseas inflow</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2020-06-18</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>isolated</td>
    </tr>
    <tr>
      <th>5164</th>
      <td>7000000019</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Bangladesh</td>
      <td>Jeju-do</td>
      <td>Jeju-do</td>
      <td>overseas inflow</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2020-06-18</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>isolated</td>
    </tr>
  </tbody>
</table>
<p>5165 rows × 14 columns</p>
</div>




```python
route
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>patient_id</th>
      <th>date</th>
      <th>province</th>
      <th>city</th>
      <th>type</th>
      <th>latitude</th>
      <th>longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1000000001</td>
      <td>2020-01-22</td>
      <td>Gyeonggi-do</td>
      <td>Gimpo-si</td>
      <td>airport</td>
      <td>37.61525</td>
      <td>126.7156</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1000000001</td>
      <td>2020-01-24</td>
      <td>Seoul</td>
      <td>Jung-gu</td>
      <td>hospital</td>
      <td>37.56724</td>
      <td>127.0057</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1000000002</td>
      <td>2020-01-25</td>
      <td>Seoul</td>
      <td>Seongbuk-gu</td>
      <td>etc</td>
      <td>37.59256</td>
      <td>127.0170</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1000000002</td>
      <td>2020-01-26</td>
      <td>Seoul</td>
      <td>Seongbuk-gu</td>
      <td>store</td>
      <td>37.59181</td>
      <td>127.0168</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1000000002</td>
      <td>2020-01-26</td>
      <td>Seoul</td>
      <td>Seongdong-gu</td>
      <td>public_transportation</td>
      <td>37.56399</td>
      <td>127.0295</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>10405</th>
      <td>6100000098</td>
      <td>2020-03-28</td>
      <td>Seoul</td>
      <td>Dobong-gu</td>
      <td>hospital</td>
      <td>37.64586</td>
      <td>127.0286</td>
    </tr>
    <tr>
      <th>10406</th>
      <td>6100000120</td>
      <td>2020-05-16</td>
      <td>Gyeonggi-do</td>
      <td>Gunpo-si</td>
      <td>etc</td>
      <td>37.36167</td>
      <td>126.9352</td>
    </tr>
    <tr>
      <th>10407</th>
      <td>6100000120</td>
      <td>2020-05-16</td>
      <td>Gyeonggi-do</td>
      <td>Suwon-si</td>
      <td>public_transportation</td>
      <td>37.28214</td>
      <td>126.9699</td>
    </tr>
    <tr>
      <th>10408</th>
      <td>6100000120</td>
      <td>2020-05-16</td>
      <td>Daegu</td>
      <td>Jung-gu</td>
      <td>etc</td>
      <td>35.87144</td>
      <td>128.6014</td>
    </tr>
    <tr>
      <th>10409</th>
      <td>6100000133</td>
      <td>2020-06-25</td>
      <td>Incheon</td>
      <td>Jung-gu</td>
      <td>airport</td>
      <td>37.44756</td>
      <td>126.4522</td>
    </tr>
  </tbody>
</table>
<p>10410 rows × 7 columns</p>
</div>




```python
policy
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>policy_id</th>
      <th>type</th>
      <th>gov_policy</th>
      <th>detail</th>
      <th>start_date</th>
      <th>Summary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Alert</td>
      <td>Infectious Disease Alert Level</td>
      <td>Level 1 (Blue)</td>
      <td>2020-01-03</td>
      <td>Disease Alert Level1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Alert</td>
      <td>Infectious Disease Alert Level</td>
      <td>Level 2 (Yellow)</td>
      <td>2020-01-20</td>
      <td>Disease Alert Level2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Alert</td>
      <td>Infectious Disease Alert Level</td>
      <td>Level 3 (Orange)</td>
      <td>2020-01-28</td>
      <td>Disease Alert Level3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Alert</td>
      <td>Infectious Disease Alert Level</td>
      <td>Level 4 (Red)</td>
      <td>2020-02-23</td>
      <td>Disease Alert Level4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Immigration</td>
      <td>Special Immigration Procedure</td>
      <td>from China</td>
      <td>2020-02-04</td>
      <td>Special Immigration Procedure from China</td>
    </tr>
    <tr>
      <th>5</th>
      <td>17</td>
      <td>Immigration</td>
      <td>Special Immigration Procedure</td>
      <td>from all the countries</td>
      <td>2020-03-19</td>
      <td>Special Immigration Procedure from All Countries</td>
    </tr>
    <tr>
      <th>6</th>
      <td>18</td>
      <td>Immigration</td>
      <td>Mandatory 14-day Self-Quarantine</td>
      <td>from all the countries</td>
      <td>2020-04-01</td>
      <td>14 Day Self-Quarantine from All Countries</td>
    </tr>
    <tr>
      <th>7</th>
      <td>20</td>
      <td>Health</td>
      <td>Emergency Use Authorization of Diagnostic Kit</td>
      <td>1st EUA</td>
      <td>2020-02-04</td>
      <td>EUA of Diagnostic Kit</td>
    </tr>
    <tr>
      <th>8</th>
      <td>25</td>
      <td>Health</td>
      <td>Drive-Through Screening Center</td>
      <td>by Local Government</td>
      <td>2020-02-26</td>
      <td>Drive-Thru Screening</td>
    </tr>
    <tr>
      <th>9</th>
      <td>27</td>
      <td>Health</td>
      <td>Mask Distribution</td>
      <td>Public-Sale</td>
      <td>2020-02-27</td>
      <td>Public Sale Masks</td>
    </tr>
    <tr>
      <th>10</th>
      <td>28</td>
      <td>Health</td>
      <td>Mask Distribution</td>
      <td>5-day Rotation System</td>
      <td>2020-03-09</td>
      <td>5-Day Rotation System</td>
    </tr>
    <tr>
      <th>11</th>
      <td>29</td>
      <td>Social</td>
      <td>Social Distancing Campaign</td>
      <td>Strong</td>
      <td>2020-02-29</td>
      <td>Social Distancing(Strong)</td>
    </tr>
    <tr>
      <th>12</th>
      <td>31</td>
      <td>Social</td>
      <td>Social Distancing Campaign</td>
      <td>Weak</td>
      <td>2020-04-20</td>
      <td>Social Distancing(Weak)</td>
    </tr>
    <tr>
      <th>13</th>
      <td>54</td>
      <td>Administrative</td>
      <td>Close bars and clubs</td>
      <td>administrative order to close bars and clubs</td>
      <td>2020-05-08</td>
      <td>Close Clubs and Bars</td>
    </tr>
    <tr>
      <th>14</th>
      <td>55</td>
      <td>Administrative</td>
      <td>local government Administrative orders</td>
      <td>Gathering limited administrative orders for nu...</td>
      <td>2020-05-16</td>
      <td>Gathering Limitation for Medical Centers</td>
    </tr>
    <tr>
      <th>15</th>
      <td>56</td>
      <td>Administrative</td>
      <td>Close karaoke</td>
      <td>Ban on gathering for 2 weeks for all karaoke a...</td>
      <td>2020-05-21</td>
      <td>2-Week Ban on Karaokes</td>
    </tr>
    <tr>
      <th>16</th>
      <td>57</td>
      <td>Transformation</td>
      <td>Logistics center</td>
      <td>On-site inspection of major logistics faciliti...</td>
      <td>2020-05-29</td>
      <td>Logistic Centers Inspection</td>
    </tr>
    <tr>
      <th>17</th>
      <td>58</td>
      <td>Transformation</td>
      <td>Wearing of masks</td>
      <td>Mandatory wearing of passenger mask domestic, ...</td>
      <td>2020-05-27</td>
      <td>Mandatory Masks(Airport)</td>
    </tr>
    <tr>
      <th>18</th>
      <td>59</td>
      <td>Transformation</td>
      <td>Wearing of masks</td>
      <td>Drivers such as buses and taxis can refuse to ...</td>
      <td>2020-05-26</td>
      <td>Mandatory Masks(Transportations</td>
    </tr>
  </tbody>
</table>
</div>




```python
floating
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>hour</th>
      <th>birth_year</th>
      <th>sex</th>
      <th>province</th>
      <th>city</th>
      <th>fp_num</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-01-01</td>
      <td>0</td>
      <td>20</td>
      <td>female</td>
      <td>Seoul</td>
      <td>Dobong-gu</td>
      <td>19140</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-01-01</td>
      <td>0</td>
      <td>20</td>
      <td>male</td>
      <td>Seoul</td>
      <td>Dobong-gu</td>
      <td>19950</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-01-01</td>
      <td>0</td>
      <td>20</td>
      <td>female</td>
      <td>Seoul</td>
      <td>Dongdaemun-gu</td>
      <td>25450</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-01-01</td>
      <td>0</td>
      <td>20</td>
      <td>male</td>
      <td>Seoul</td>
      <td>Dongdaemun-gu</td>
      <td>27050</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-01-01</td>
      <td>0</td>
      <td>20</td>
      <td>female</td>
      <td>Seoul</td>
      <td>Dongjag-gu</td>
      <td>28880</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1084795</th>
      <td>2020-05-31</td>
      <td>21</td>
      <td>40</td>
      <td>female</td>
      <td>Seoul</td>
      <td>Dobong-gu</td>
      <td>27620</td>
    </tr>
    <tr>
      <th>1084796</th>
      <td>2020-05-31</td>
      <td>21</td>
      <td>40</td>
      <td>female</td>
      <td>Seoul</td>
      <td>Songpa-gu</td>
      <td>56560</td>
    </tr>
    <tr>
      <th>1084797</th>
      <td>2020-05-31</td>
      <td>21</td>
      <td>50</td>
      <td>female</td>
      <td>Seoul</td>
      <td>Gangdong-gu</td>
      <td>38960</td>
    </tr>
    <tr>
      <th>1084798</th>
      <td>2020-05-31</td>
      <td>22</td>
      <td>60</td>
      <td>female</td>
      <td>Seoul</td>
      <td>Guro-gu</td>
      <td>25420</td>
    </tr>
    <tr>
      <th>1084799</th>
      <td>2020-05-31</td>
      <td>23</td>
      <td>40</td>
      <td>male</td>
      <td>Seoul</td>
      <td>Eunpyeong-gu</td>
      <td>38650</td>
    </tr>
  </tbody>
</table>
<p>1084800 rows × 7 columns</p>
</div>




```python
count
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>time</th>
      <th>province</th>
      <th>confirmed</th>
      <th>released</th>
      <th>deceased</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-01-20</td>
      <td>16</td>
      <td>Seoul</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-01-20</td>
      <td>16</td>
      <td>Busan</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-01-20</td>
      <td>16</td>
      <td>Daegu</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-01-20</td>
      <td>16</td>
      <td>Incheon</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-01-20</td>
      <td>16</td>
      <td>Gwangju</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2766</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>Jeollabuk-do</td>
      <td>27</td>
      <td>21</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2767</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>Jeollanam-do</td>
      <td>24</td>
      <td>19</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2768</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>Gyeongsangbuk-do</td>
      <td>1389</td>
      <td>1328</td>
      <td>54</td>
    </tr>
    <tr>
      <th>2769</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>Gyeongsangnam-do</td>
      <td>134</td>
      <td>128</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2770</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>Jeju-do</td>
      <td>19</td>
      <td>16</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>2771 rows × 6 columns</p>
</div>




```python
case
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>case_id</th>
      <th>province</th>
      <th>city</th>
      <th>group</th>
      <th>infection_case</th>
      <th>confirmed</th>
      <th>latitude</th>
      <th>longitude</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1000001</td>
      <td>Seoul</td>
      <td>Yongsan-gu</td>
      <td>True</td>
      <td>Itaewon Clubs</td>
      <td>139</td>
      <td>37.538621</td>
      <td>126.992652</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1000002</td>
      <td>Seoul</td>
      <td>Gwanak-gu</td>
      <td>True</td>
      <td>Richway</td>
      <td>119</td>
      <td>37.48208</td>
      <td>126.901384</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1000003</td>
      <td>Seoul</td>
      <td>Guro-gu</td>
      <td>True</td>
      <td>Guro-gu Call Center</td>
      <td>95</td>
      <td>37.508163</td>
      <td>126.884387</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1000004</td>
      <td>Seoul</td>
      <td>Yangcheon-gu</td>
      <td>True</td>
      <td>Yangcheon Table Tennis Club</td>
      <td>43</td>
      <td>37.546061</td>
      <td>126.874209</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1000005</td>
      <td>Seoul</td>
      <td>Dobong-gu</td>
      <td>True</td>
      <td>Day Care Center</td>
      <td>43</td>
      <td>37.679422</td>
      <td>127.044374</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>169</th>
      <td>6100012</td>
      <td>Gyeongsangnam-do</td>
      <td>-</td>
      <td>False</td>
      <td>etc</td>
      <td>20</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>170</th>
      <td>7000001</td>
      <td>Jeju-do</td>
      <td>-</td>
      <td>False</td>
      <td>overseas inflow</td>
      <td>14</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>171</th>
      <td>7000002</td>
      <td>Jeju-do</td>
      <td>-</td>
      <td>False</td>
      <td>contact with patient</td>
      <td>0</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>172</th>
      <td>7000003</td>
      <td>Jeju-do</td>
      <td>-</td>
      <td>False</td>
      <td>etc</td>
      <td>4</td>
      <td>-</td>
      <td>-</td>
    </tr>
    <tr>
      <th>173</th>
      <td>7000004</td>
      <td>Jeju-do</td>
      <td>from other city</td>
      <td>True</td>
      <td>Itaewon Clubs</td>
      <td>1</td>
      <td>-</td>
      <td>-</td>
    </tr>
  </tbody>
</table>
<p>174 rows × 8 columns</p>
</div>




```python
time
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>time</th>
      <th>test</th>
      <th>negative</th>
      <th>confirmed</th>
      <th>released</th>
      <th>deceased</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-01-20</td>
      <td>16</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-01-21</td>
      <td>16</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-01-22</td>
      <td>16</td>
      <td>4</td>
      <td>3</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-01-23</td>
      <td>16</td>
      <td>22</td>
      <td>21</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-01-24</td>
      <td>16</td>
      <td>27</td>
      <td>25</td>
      <td>2</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>158</th>
      <td>2020-06-26</td>
      <td>0</td>
      <td>1232315</td>
      <td>1200885</td>
      <td>12602</td>
      <td>11172</td>
      <td>282</td>
    </tr>
    <tr>
      <th>159</th>
      <td>2020-06-27</td>
      <td>0</td>
      <td>1243780</td>
      <td>1211261</td>
      <td>12653</td>
      <td>11317</td>
      <td>282</td>
    </tr>
    <tr>
      <th>160</th>
      <td>2020-06-28</td>
      <td>0</td>
      <td>1251695</td>
      <td>1219975</td>
      <td>12715</td>
      <td>11364</td>
      <td>282</td>
    </tr>
    <tr>
      <th>161</th>
      <td>2020-06-29</td>
      <td>0</td>
      <td>1259954</td>
      <td>1228698</td>
      <td>12757</td>
      <td>11429</td>
      <td>282</td>
    </tr>
    <tr>
      <th>162</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>1273766</td>
      <td>1240157</td>
      <td>12800</td>
      <td>11537</td>
      <td>282</td>
    </tr>
  </tbody>
</table>
<p>163 rows × 7 columns</p>
</div>




```python
timeage
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>time</th>
      <th>age</th>
      <th>confirmed</th>
      <th>deceased</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>0s</td>
      <td>32</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>10s</td>
      <td>169</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>20s</td>
      <td>1235</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>30s</td>
      <td>506</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>40s</td>
      <td>633</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1084</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>40s</td>
      <td>1681</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1085</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>50s</td>
      <td>2286</td>
      <td>15</td>
    </tr>
    <tr>
      <th>1086</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>60s</td>
      <td>1668</td>
      <td>41</td>
    </tr>
    <tr>
      <th>1087</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>70s</td>
      <td>850</td>
      <td>82</td>
    </tr>
    <tr>
      <th>1088</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>80s</td>
      <td>556</td>
      <td>139</td>
    </tr>
  </tbody>
</table>
<p>1089 rows × 5 columns</p>
</div>




```python
timegender
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>time</th>
      <th>sex</th>
      <th>confirmed</th>
      <th>deceased</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>male</td>
      <td>1591</td>
      <td>13</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>female</td>
      <td>2621</td>
      <td>9</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-03-03</td>
      <td>0</td>
      <td>male</td>
      <td>1810</td>
      <td>16</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-03-03</td>
      <td>0</td>
      <td>female</td>
      <td>3002</td>
      <td>12</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-03-04</td>
      <td>0</td>
      <td>male</td>
      <td>1996</td>
      <td>20</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>237</th>
      <td>2020-06-28</td>
      <td>0</td>
      <td>female</td>
      <td>7265</td>
      <td>131</td>
    </tr>
    <tr>
      <th>238</th>
      <td>2020-06-29</td>
      <td>0</td>
      <td>male</td>
      <td>5470</td>
      <td>151</td>
    </tr>
    <tr>
      <th>239</th>
      <td>2020-06-29</td>
      <td>0</td>
      <td>female</td>
      <td>7287</td>
      <td>131</td>
    </tr>
    <tr>
      <th>240</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>male</td>
      <td>5495</td>
      <td>151</td>
    </tr>
    <tr>
      <th>241</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>female</td>
      <td>7305</td>
      <td>131</td>
    </tr>
  </tbody>
</table>
<p>242 rows × 5 columns</p>
</div>



# Summary of COVID19 in Korea

## Overall Trend


```python
# We first have to change the date column to datetime objects for better visualtization
time['date'] = [datetime.strptime(x,'%Y-%m-%d').date() for x in time['date']]
```


```python
time['actual'] = time['confirmed'] - time['deceased'] - time['released']
```


```python
#Make data for adding a text layer
text = pd.DataFrame({'date':["2020-06-30","2020-06-30","2020-06-30"],'w':['confirmed','released','actual'],'count':[12800,11537,981]})
text['date'] = [datetime.strptime(x,'%Y-%m-%d').date() for x in text['date']]
text
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>w</th>
      <th>count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-06-30</td>
      <td>confirmed</td>
      <td>12800</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-06-30</td>
      <td>released</td>
      <td>11537</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-06-30</td>
      <td>actual</td>
      <td>981</td>
    </tr>
  </tbody>
</table>
</div>



### Number of Confirmed / Released / Actual / Deceased Patients (Total)


```python
(ggplot(data=time,mapping=aes(x='date',group=1))+geom_line(aes(y='confirmed'),color='#E9A3B2')+ggtitle("Total")
+scale_x_date(labels=date_format('%Y-%m'),breaks=date_breaks('1 month'))
 +geom_line(aes(x='date',y='released'),color='#91A1D1')
      +geom_line(aes(x='date',y='actual'),color='#78AD79')
+geom_text(data=text,mapping=aes(x='date',y='count',label='w'))
 +theme(figure_size=(13,7))
)
```


![png](/images/COVID_files/COVID_21_0.png)





    <ggplot: (-9223371914249645445)>



The three lines represent the number of confirmed, released and actual patients in Korea from Jan 20th to June 30th respectively.<br>
The number of confirmed patients grew steeply from March to April but the number of released patients also grew steeply by a month-difference. Thus the number of actual patients (Confirmed - Released - Deceased) were very much in control.


```python
dec = (ggplot(data=time,mapping=aes(x='date',y='deceased',group=1))+geom_line(color='#E9A3B2')+ggtitle("Deceased")
+scale_x_date(labels=date_format('%m-%d'),breaks=date_breaks('2 weeks')))
```


```python
dec + theme(figure_size=(13,7))
```


![png](/images/COVID_files/COVID_24_0.png)





    <ggplot: (122605120218)>



The number of deceased patients grew fast during the worst period(March to April). However, recently the growth rate decresed greatly.

### Number Tested and Negative


```python
(
ggplot(data=time,mapping=aes(x='date',group=1))
 +geom_line(aes(y='test'),color='#105496')
 +geom_line(aes(y='negative'),color='#8F0F53')
 +scale_x_date(labels=date_format('%m-%d'),breaks=date_breaks('2 weeks'))
 +theme(figure_size=(12,7))
+geom_text(data=time[162:],mapping=aes(x='date',y='test'),label='Test',color='#105496',size=11)
+geom_text(data=time[162:],mapping=aes(x='date',y='negative'),label='Negative',color='#8F0F53',size=11,va='top')
 +ggtitle('# Tested and Negative')

)
```


![png](/images/COVID_files/COVID_27_0.png)





    <ggplot: (-9223371914246339847)>



### Infection Routes

We can see that more than 1,000,000 people have been tested and most of the people were tested negative.


```python
(ggplot(data=route,mapping=aes(fill='type'))+geom_bar(aes(x='type'))+theme(figure_size=(15,8),axis_text_x=element_text(rotation=90, hjust=1))
+ geom_text(
     aes(x='type',label='stat(count)'),
     stat='count',
     nudge_y=0.125,
     va='bottom'
 )
 + geom_text(
     aes(label='stat(prop)*100', x='type',group=1),
     stat='count',
     nudge_x=0,
     nudge_y=0.5,
     va='top',
     format_string='({:.1f}%)'
 ))
```


![png](/images/COVID_files/COVID_30_0.png)





    <ggplot: (-9223371914246168632)>



The most common infection routes were hospitals, public transportation, restaurants and stores. 

## Trend by Age


```python
(ggplot(data=info)+geom_bar(aes(x='age',fill='age'))+theme(axis_text_x=element_text(rotation=90, hjust=1),figure_size=(13,7))
+ geom_text(
     aes(x='age',label='stat(count)'),
     stat='count',
     nudge_y=0,
     va='bottom'
 )

 + geom_text(
     aes(label='stat(prop)*100', x='age',group=1),
     stat='count',
     nudge_x=0,
     nudge_y=0.5,
     va='top',
     format_string='({:.1f}%)'
 )
+ggtitle("By Age")
)
```


![png](/images/COVID_files/COVID_33_0.png)





    <ggplot: (-9223371914242031002)>



Can roughly see the trend by age but there were too many nan values to interpret


```python
timeage['date'] = [datetime.strptime(x,"%Y-%m-%d").date() for x in timeage['date']]
timeage
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>time</th>
      <th>age</th>
      <th>confirmed</th>
      <th>deceased</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>0s</td>
      <td>32</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>10s</td>
      <td>169</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>20s</td>
      <td>1235</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>30s</td>
      <td>506</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-03-02</td>
      <td>0</td>
      <td>40s</td>
      <td>633</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1084</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>40s</td>
      <td>1681</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1085</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>50s</td>
      <td>2286</td>
      <td>15</td>
    </tr>
    <tr>
      <th>1086</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>60s</td>
      <td>1668</td>
      <td>41</td>
    </tr>
    <tr>
      <th>1087</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>70s</td>
      <td>850</td>
      <td>82</td>
    </tr>
    <tr>
      <th>1088</th>
      <td>2020-06-30</td>
      <td>0</td>
      <td>80s</td>
      <td>556</td>
      <td>139</td>
    </tr>
  </tbody>
</table>
<p>1089 rows × 5 columns</p>
</div>




```python
# make a label in order to change the legend
order = timeage[timeage.date==datetime.strptime('2020-06-30','%Y-%m-%d').date()].nlargest(11, 'confirmed').age.tolist()
order
```




    ['20s', '50s', '40s', '60s', '30s', '70s', '10s', '80s', '0s']




```python
(ggplot(timeage) + geom_line(aes(x='date',y='confirmed',group='age',color='age'))
 +scale_color_discrete(limits=order) #change legend order
 +ggtitle('Confirmed by Age')
+scale_x_date(labels=date_format('%m/%d'),breaks=date_breaks('2 weeks'))
 +theme(figure_size = (15,8))

)
```


![png](/images/COVID_files/COVID_37_0.png)





    <ggplot: (-9223371914243971128)>



Most of the confirmed patients were 20s, followed by 50s, 40s and 60s. This is sensible since 20s tend to be more active and meet more people. 


```python
order_dec = timeage[timeage.date==datetime.strptime('2020-06-30','%Y-%m-%d').date()].nlargest(11, 'deceased').age.tolist()
order_dec
```




    ['80s', '70s', '60s', '50s', '40s', '30s', '0s', '10s', '20s']




```python
(ggplot(timeage) + geom_line(aes(x='date',y='deceased',group='age',color='age'))
 +ggtitle('Deceased by Age')
+scale_x_date(labels=date_format('%m/%d'),breaks=date_breaks('2 weeks'))
 +theme(figure_size = (15,12))
+scale_color_discrete(limits=order_dec)
)
```


![png](/images/COVID_files/COVID_40_0.png)





    <ggplot: (122608518408)>



On the otherhand, the number of deceased patients by age look very different from the number of confirmed patients. 60s,70s and 80s were more vulnerable to COVID-19 and 10s and 20s had a very small decease rate.
It seems that COVID-19 is a disease <i> spread by the 20s, which attacks the elderly.


```python
(ggplot(data=info) + geom_bar(aes('infection_case',group='age',fill='age')) +theme(figure_size=(15,8),axis_text_x=element_text(rotation=90, hjust=1))
+ geom_text(
     aes(x='infection_case',label='stat(count)'),
     stat='count',
     nudge_y=0.125,
     va='bottom'
 )
+ggtitle("Events that Casued Infections"))
```


![png](/images/COVID_files/COVID_42_0.png)





    <ggplot: (-9223371914246188379)>



## Trend by Age


```python
(ggplot(data=info)+geom_bar(aes(x='sex',fill='sex'))+theme(axis_text_x=element_text(rotation=90, hjust=1))
+ geom_text(
     aes(x='sex',label='stat(count)'),
     stat='count',
     nudge_y=0,
     va='bottom'
 )

 + geom_text(
     aes(label='stat(prop)*100', x='sex',group=1),
     stat='count',
     nudge_x=0,
     nudge_y=0.5,
     va='top',
     format_string='({:.1f}%)'
 )
+ggtitle("By gender")
)
```


![png](/images/COVID_files/COVID_44_0.png)





    <ggplot: (122612423642)>



Too many Nan Values as well


```python
timegender['date'] = [datetime.strptime(x,"%Y-%m-%d").date() for x in timegender['date']]
```


```python
(ggplot(timegender) + geom_line(aes(x='date',y='confirmed',group='sex',color='sex'))
 +ggtitle('Confirmed by Gender')
+scale_x_date(labels=date_format('%m/%d'),breaks=date_breaks('1 week'))
 +theme(figure_size = (15,8))

)
```


![png](/images/COVID_files/COVID_47_0.png)





    <ggplot: (144567068936)>



More female patients were confirmed than men. This needs further investigation.


```python
(ggplot(timegender) + geom_line(aes(x='date',y='deceased',group='sex',color='sex'))
 +ggtitle('Deceased by Gender')
+scale_x_date(labels=date_format('%m/%d'),breaks=date_breaks('1 week'))
 +theme(figure_size = (15,8))

)
```


![png](/images/COVID_files/COVID_49_0.png)





    <ggplot: (122608497605)>



More men patients deceased than women patients. This is an interesting point because more women were confirmed. 


```python
(ggplot(data=info) + geom_bar(aes('infection_case',group='sex',fill='sex')) +theme(figure_size=(15,8),axis_text_x=element_text(rotation=90, hjust=1))
+ geom_text(
     aes(x='infection_case',label='stat(count)'),
     stat='count',
     nudge_y=0.125,
     va='bottom'
 )
)
```


![png](/images/COVID_files/COVID_51_0.png)





    <ggplot: (-9223371914242047509)>



## Trend By Province


```python
count['date'] = [datetime.strptime(x,'%Y-%m-%d').date() for x in count['date']]
```


```python
#make a list to reorder the legend
order_prov = count[count.date==datetime.strptime('2020-06-30','%Y-%m-%d').date()].nlargest(17, 'confirmed').province.tolist()
order_prov
```




    ['Daegu',
     'Gyeongsangbuk-do',
     'Seoul',
     'Gyeonggi-do',
     'Incheon',
     'Chungcheongnam-do',
     'Busan',
     'Gyeongsangnam-do',
     'Daejeon',
     'Gangwon-do',
     'Chungcheongbuk-do',
     'Ulsan',
     'Sejong',
     'Gwangju',
     'Jeollabuk-do',
     'Jeollanam-do',
     'Jeju-do']




```python
prov = (ggplot(data=count,mapping= aes(x='date',y='confirmed',group='province',color='province'))
+scale_x_date(labels=date_format('%Y-%m-%d'),breaks=date_breaks('1 month'))
+geom_line()
+ggtitle("Confirmed By Province")
+scale_color_discrete(limits=order_prov)
+theme(figure_size=(13,10))
)
prov
```


![png](/images/COVID_files/COVID_55_0.png)





    <ggplot: (122608859326)>



We can see that Daegu was highly affected by COVID-19 (Shincheonji Church). <br>
Gyeongsangbuk-do, Seoul, Gyeonggi-do and Incheon also had a lot of patients. Compared to these 4 provinces, other provinces had a relatively small number of patients. The graph was drawn to show all the provinces which made other provinces uninterpretable.


```python
#give a  ylim to enlargen the graph
prov + ylim(0,1500)+scale_color_discrete(limits=order_prov)
```

    C:\Users\ingge\Anaconda3\lib\site-packages\plotnine\scales\scales.py:29: PlotnineWarning: Scale for 'color' is already present.
    Adding another scale for 'color',
    which will replace the existing scale.
    
    


![png](/images/COVID_files/COVID_57_1.png)





    <ggplot: (122608557302)>




```python
prov + ylim(0,500)+scale_color_discrete(limits=order_prov)
```

    C:\Users\ingge\Anaconda3\lib\site-packages\plotnine\scales\scales.py:29: PlotnineWarning: Scale for 'color' is already present.
    Adding another scale for 'color',
    which will replace the existing scale.
    
    


![png](/images/COVID_files/COVID_58_1.png)





    <ggplot: (122613668051)>



Since there are too many lines, its hard to interpret the graph even when it's zoomed in


```python
(ggplot(data=count,mapping= aes(x='date',y='confirmed',group='province',color='province'))
 +scale_x_date(labels=date_format('%m'),breaks=date_breaks('3 months'))
+facet_wrap('province')
+geom_line(size=2)
+theme_bw()
 +theme(figure_size=(20,20),text=element_text(size=9))
 +ggtitle("Confirm Rate by Province")
)
```


![png](/images/COVID_files/COVID_60_0.png)





    <ggplot: (-9223371914242166524)>



Zoom the graphs


```python
#ylim 추가
(ggplot(data=count,mapping= aes(x='date',y='confirmed',group='province',color='province'))
 +scale_x_date(labels=date_format('%m'),breaks=date_breaks('3 months'))
+facet_wrap('province')
+geom_line(size=2)
+theme_bw()
 +theme(figure_size=(20,20),text=element_text(size=9))
 +ggtitle("Confirm Rate by Province")
 +ylim(0,200)
)
```


![png](/images/COVID_files/COVID_62_0.png)





    <ggplot: (-9223371914243978194)>



https://pypi.org/project/bar-chart-race/


```python
import bar_chart_race as bcr
```


```python
bcr_data = count.groupby(['date','province'])['confirmed'].sum().unstack().reset_index()
bcr_data['date'] = [str(x) for x in bcr_data['date']]
```


```python
bcr_data.columns
```




    Index(['date', 'Busan', 'Chungcheongbuk-do', 'Chungcheongnam-do', 'Daegu',
           'Daejeon', 'Gangwon-do', 'Gwangju', 'Gyeonggi-do', 'Gyeongsangbuk-do',
           'Gyeongsangnam-do', 'Incheon', 'Jeju-do', 'Jeollabuk-do',
           'Jeollanam-do', 'Sejong', 'Seoul', 'Ulsan'],
          dtype='object', name='province')




```python
bcr_data = bcr_data.set_index('date')
```


```python
bcr_data
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>province</th>
      <th>Busan</th>
      <th>Chungcheongbuk-do</th>
      <th>Chungcheongnam-do</th>
      <th>Daegu</th>
      <th>Daejeon</th>
      <th>Gangwon-do</th>
      <th>Gwangju</th>
      <th>Gyeonggi-do</th>
      <th>Gyeongsangbuk-do</th>
      <th>Gyeongsangnam-do</th>
      <th>Incheon</th>
      <th>Jeju-do</th>
      <th>Jeollabuk-do</th>
      <th>Jeollanam-do</th>
      <th>Sejong</th>
      <th>Seoul</th>
      <th>Ulsan</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-01-20</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2020-01-21</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2020-01-22</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2020-01-23</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2020-01-24</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2020-06-26</th>
      <td>152</td>
      <td>62</td>
      <td>166</td>
      <td>6903</td>
      <td>102</td>
      <td>64</td>
      <td>33</td>
      <td>1150</td>
      <td>1387</td>
      <td>133</td>
      <td>336</td>
      <td>19</td>
      <td>25</td>
      <td>20</td>
      <td>49</td>
      <td>1267</td>
      <td>55</td>
    </tr>
    <tr>
      <th>2020-06-27</th>
      <td>152</td>
      <td>63</td>
      <td>166</td>
      <td>6904</td>
      <td>104</td>
      <td>64</td>
      <td>33</td>
      <td>1167</td>
      <td>1387</td>
      <td>133</td>
      <td>337</td>
      <td>19</td>
      <td>26</td>
      <td>20</td>
      <td>49</td>
      <td>1284</td>
      <td>55</td>
    </tr>
    <tr>
      <th>2020-06-28</th>
      <td>152</td>
      <td>64</td>
      <td>167</td>
      <td>6904</td>
      <td>110</td>
      <td>64</td>
      <td>37</td>
      <td>1184</td>
      <td>1387</td>
      <td>133</td>
      <td>337</td>
      <td>19</td>
      <td>26</td>
      <td>23</td>
      <td>49</td>
      <td>1298</td>
      <td>55</td>
    </tr>
    <tr>
      <th>2020-06-29</th>
      <td>153</td>
      <td>64</td>
      <td>167</td>
      <td>6906</td>
      <td>112</td>
      <td>64</td>
      <td>41</td>
      <td>1200</td>
      <td>1388</td>
      <td>134</td>
      <td>338</td>
      <td>19</td>
      <td>27</td>
      <td>24</td>
      <td>49</td>
      <td>1305</td>
      <td>55</td>
    </tr>
    <tr>
      <th>2020-06-30</th>
      <td>154</td>
      <td>65</td>
      <td>167</td>
      <td>6906</td>
      <td>117</td>
      <td>65</td>
      <td>44</td>
      <td>1207</td>
      <td>1389</td>
      <td>134</td>
      <td>341</td>
      <td>19</td>
      <td>27</td>
      <td>24</td>
      <td>50</td>
      <td>1312</td>
      <td>55</td>
    </tr>
  </tbody>
</table>
<p>163 rows × 17 columns</p>
</div>




```python
#df = bcr.load_dataset(bcr_data)
html =bcr.bar_chart_race(
    df=bcr_data,
    filename=None,
    orientation='h',
    sort='desc',
    n_bars=6,
    fixed_order=False,
    fixed_max=True,
    steps_per_period=10,
    interpolate_period=False,
    label_bars=True,
    bar_size=.95,
    period_label={'x': .99, 'y': .25, 'ha': 'right', 'va': 'center'},
    #period_fmt='%Y-%m-%d',
    period_summary_func=lambda v, r: {'x': .99, 'y': .18,
                                      's': f'Total Confirmed: {v.nlargest(6).sum():,.0f}',
                                      'ha': 'right', 'size': 8, 'family': 'Courier New'},
    #perpendicular_bar_func='median',
    period_length=500,
    figsize=(5, 3),
    dpi=144,
    cmap='antique',
    title='COVID-19 in Korea',
    title_size='',
    bar_label_size=7,
    tick_label_size=7,
    shared_fontdict={'family' : 'Helvetica', 'color' : '.1'},
    scale='linear',
    writer=None,
    fig=None,
    bar_kwargs={'alpha': .7},
    filter_column_colors=True)  
```

    findfont: Font family ['Helvetica'] not found. Falling back to DejaVu Sans.
    findfont: Font family ['Helvetica'] not found. Falling back to DejaVu Sans.
    findfont: Font family ['Helvetica'] not found. Falling back to DejaVu Sans.
    


```python
html
```


<iframe src="https://drive.google.com/file/d/16r1GcREflDf61crBHK8zKbmNpssnI1Zz/preview" width="640" height="480"></iframe>

A bar char race shows a better description of COVID-19 patients by province.

# Policy and Daily Confirmed Patients

Check the impact of policies on daily confirmed patients.


```python
(ggplot(data=time,mapping=aes(x='date',y='daily',group=1))
 +geom_line(color='#E9A3B2')+ggtitle("Daily Confirmed")
+scale_x_date(labels=date_format('%m/%d'),breaks=date_breaks('1 day'),limits=(datetime.strptime("2020-05-26","%Y-%m-%d").date(),datetime.strptime("2020-07-01","%Y-%m-%d").date()))
 +theme(figure_size=(20,10))
+ylim(0,100)
+geom_text(aes(x='date',label='daily'),va='top',nudge_y=1)
)
```

    C:\Users\ingge\Anaconda3\lib\site-packages\plotnine\geoms\geom_path.py:75: PlotnineWarning: geom_path: Removed 127 rows containing missing values.
    C:\Users\ingge\Anaconda3\lib\site-packages\plotnine\layer.py:464: PlotnineWarning: geom_text : Removed 127 rows containing missing values.
    


![png](/images/COVID_files/COVID_74_1.png)





    <ggplot: (122612423600)>




```python
#modified the data (deleted less important policies and added 'Summary')
policy['date'] = [datetime.strptime(x,'%Y-%m-%d').date() for x in policy['start_date']]
policy
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>policy_id</th>
      <th>type</th>
      <th>gov_policy</th>
      <th>detail</th>
      <th>start_date</th>
      <th>Summary</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Alert</td>
      <td>Infectious Disease Alert Level</td>
      <td>Level 1 (Blue)</td>
      <td>2020-01-03</td>
      <td>Disease Alert Level1</td>
      <td>2020-01-03</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Alert</td>
      <td>Infectious Disease Alert Level</td>
      <td>Level 2 (Yellow)</td>
      <td>2020-01-20</td>
      <td>Disease Alert Level2</td>
      <td>2020-01-20</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Alert</td>
      <td>Infectious Disease Alert Level</td>
      <td>Level 3 (Orange)</td>
      <td>2020-01-28</td>
      <td>Disease Alert Level3</td>
      <td>2020-01-28</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Alert</td>
      <td>Infectious Disease Alert Level</td>
      <td>Level 4 (Red)</td>
      <td>2020-02-23</td>
      <td>Disease Alert Level4</td>
      <td>2020-02-23</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Immigration</td>
      <td>Special Immigration Procedure</td>
      <td>from China</td>
      <td>2020-02-04</td>
      <td>Special Immigration Procedure from China</td>
      <td>2020-02-04</td>
    </tr>
    <tr>
      <th>5</th>
      <td>17</td>
      <td>Immigration</td>
      <td>Special Immigration Procedure</td>
      <td>from all the countries</td>
      <td>2020-03-19</td>
      <td>Special Immigration Procedure from All Countries</td>
      <td>2020-03-19</td>
    </tr>
    <tr>
      <th>6</th>
      <td>18</td>
      <td>Immigration</td>
      <td>Mandatory 14-day Self-Quarantine</td>
      <td>from all the countries</td>
      <td>2020-04-01</td>
      <td>14 Day Self-Quarantine from All Countries</td>
      <td>2020-04-01</td>
    </tr>
    <tr>
      <th>7</th>
      <td>20</td>
      <td>Health</td>
      <td>Emergency Use Authorization of Diagnostic Kit</td>
      <td>1st EUA</td>
      <td>2020-02-04</td>
      <td>EUA of Diagnostic Kit</td>
      <td>2020-02-04</td>
    </tr>
    <tr>
      <th>8</th>
      <td>25</td>
      <td>Health</td>
      <td>Drive-Through Screening Center</td>
      <td>by Local Government</td>
      <td>2020-02-26</td>
      <td>Drive-Thru Screening</td>
      <td>2020-02-26</td>
    </tr>
    <tr>
      <th>9</th>
      <td>27</td>
      <td>Health</td>
      <td>Mask Distribution</td>
      <td>Public-Sale</td>
      <td>2020-02-27</td>
      <td>Public Sale Masks</td>
      <td>2020-02-27</td>
    </tr>
    <tr>
      <th>10</th>
      <td>28</td>
      <td>Health</td>
      <td>Mask Distribution</td>
      <td>5-day Rotation System</td>
      <td>2020-03-09</td>
      <td>5-Day Rotation System</td>
      <td>2020-03-09</td>
    </tr>
    <tr>
      <th>11</th>
      <td>29</td>
      <td>Social</td>
      <td>Social Distancing Campaign</td>
      <td>Strong</td>
      <td>2020-02-29</td>
      <td>Social Distancing(Strong)</td>
      <td>2020-02-29</td>
    </tr>
    <tr>
      <th>12</th>
      <td>31</td>
      <td>Social</td>
      <td>Social Distancing Campaign</td>
      <td>Weak</td>
      <td>2020-04-20</td>
      <td>Social Distancing(Weak)</td>
      <td>2020-04-20</td>
    </tr>
    <tr>
      <th>13</th>
      <td>54</td>
      <td>Administrative</td>
      <td>Close bars and clubs</td>
      <td>administrative order to close bars and clubs</td>
      <td>2020-05-08</td>
      <td>Close Clubs and Bars</td>
      <td>2020-05-08</td>
    </tr>
    <tr>
      <th>14</th>
      <td>55</td>
      <td>Administrative</td>
      <td>local government Administrative orders</td>
      <td>Gathering limited administrative orders for nu...</td>
      <td>2020-05-16</td>
      <td>Gathering Limitation for Medical Centers</td>
      <td>2020-05-16</td>
    </tr>
    <tr>
      <th>15</th>
      <td>56</td>
      <td>Administrative</td>
      <td>Close karaoke</td>
      <td>Ban on gathering for 2 weeks for all karaoke a...</td>
      <td>2020-05-21</td>
      <td>2-Week Ban on Karaokes</td>
      <td>2020-05-21</td>
    </tr>
    <tr>
      <th>16</th>
      <td>57</td>
      <td>Transformation</td>
      <td>Logistics center</td>
      <td>On-site inspection of major logistics faciliti...</td>
      <td>2020-05-29</td>
      <td>Logistic Centers Inspection</td>
      <td>2020-05-29</td>
    </tr>
    <tr>
      <th>17</th>
      <td>58</td>
      <td>Transformation</td>
      <td>Wearing of masks</td>
      <td>Mandatory wearing of passenger mask domestic, ...</td>
      <td>2020-05-27</td>
      <td>Mandatory Masks(Airport)</td>
      <td>2020-05-27</td>
    </tr>
    <tr>
      <th>18</th>
      <td>59</td>
      <td>Transformation</td>
      <td>Wearing of masks</td>
      <td>Drivers such as buses and taxis can refuse to ...</td>
      <td>2020-05-26</td>
      <td>Mandatory Masks(Transportations</td>
      <td>2020-05-26</td>
    </tr>
  </tbody>
</table>
</div>




```python
policy1= policy.drop([7,8,17],axis=0)
```


```python
#get number of daily confirmed patients
daily = [x -y for x,y in zip(time['confirmed'][1:],time['confirmed'])]
```


```python
daily= [0] + daily
time['daily'] = daily
```


```python

(ggplot(data=time,mapping=aes(x='date',y='daily',group=1))+geom_line(color='#E9A3B2',size=2)+ggtitle("Daily Confirmed & Policies")
+scale_x_date(labels=date_format('%m/%d'),breaks=date_breaks('1 week'))+theme(figure_size=(20,10))
 +geom_vline(data=policy1,mapping=aes(xintercept='date'),color='#85757B',linetype='dashed')
 +geom_text(data=policy1,mapping=aes(x='date',y=0,label='Summary'),angle=90,color='#DC5A8C',size=10,va='bottom',ha='right')

)
```


![png](/images/COVID_files/COVID_79_0.png)





    <ggplot: (122608516321)>



# Floating People and Confirmed Patients

https://towardsdatascience.com/mapping-with-matplotlib-pandas-geopandas-and-basemap-in-python-d11b57ab5dac<br>
https://datascienceschool.net/view-notebook/ef921dc25e01437b9b5c532ba3b89b02/ <br>
shapefile data source: http://www.juso.go.kr/addrlink/addressBuildDevNew.do?menu=bsin <br>
Data : Data of floating population in Seoul, South Korea (from SK Telecom Big Data Hub)


```python
import matplotlib.pyplot as plt
import geopandas as gpd
```


```python
seoul = gpd.read_file('./Seoul/TL_KODIS_BAS_11.shp',encoding='euc-kr')
seoul.geometry = seoul.buffer(0.001)
```


```python
seoul.tail()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>BAS_MGT_SN</th>
      <th>CTP_KOR_NM</th>
      <th>SIG_CD</th>
      <th>SIG_KOR_NM</th>
      <th>BAS_ID</th>
      <th>BAS_AR</th>
      <th>NTFC_DE</th>
      <th>MVMN_DE</th>
      <th>MVMN_RESN</th>
      <th>OPERT_DE</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5660</th>
      <td>1129000011</td>
      <td>서울특별시</td>
      <td>11290</td>
      <td>성북구</td>
      <td>02797</td>
      <td>0.112</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>POLYGON ((958717.206 1956096.130, 958730.116 1...</td>
    </tr>
    <tr>
      <th>5661</th>
      <td>1129000028</td>
      <td>서울특별시</td>
      <td>11290</td>
      <td>성북구</td>
      <td>02709</td>
      <td>0.150</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>POLYGON ((956583.121 1957109.400, 956584.943 1...</td>
    </tr>
    <tr>
      <th>5662</th>
      <td>1129000046</td>
      <td>서울특별시</td>
      <td>11290</td>
      <td>성북구</td>
      <td>02851</td>
      <td>0.052</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>POLYGON ((957702.911 1954159.861, 957702.913 1...</td>
    </tr>
    <tr>
      <th>5663</th>
      <td>1129000047</td>
      <td>서울특별시</td>
      <td>11290</td>
      <td>성북구</td>
      <td>02822</td>
      <td>1.087</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>POLYGON ((954675.916 1956603.961, 954675.985 1...</td>
    </tr>
    <tr>
      <th>5664</th>
      <td>1129000068</td>
      <td>서울특별시</td>
      <td>11290</td>
      <td>성북구</td>
      <td>02838</td>
      <td>0.126</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>POLYGON ((955414.324 1955463.203, 955414.324 1...</td>
    </tr>
  </tbody>
</table>
</div>




```python
#shapefile of Seoul
seoul = seoul.dissolve(by='SIG_CD')
ax = seoul.plot(figsize=(10,10))
```


![png](/images/COVID_files/COVID_85_0.png)



```python
#change data to Korean in order to match the shpefile data
pat = route[route['province']=='Seoul'].groupby(['city']).count()['patient_id'].reset_index()
pat['city'] = ['도봉구','동대문구','동작구','은평구','강북구','강동구','강남구','강서구','금천구','구로구','관악구','광진구','종로구','중구',
'중랑구','마포구','노원구','서초구','서대문구','성북구','성동구','송파구','양천구','영등포구','용산구']
pat
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>city</th>
      <th>patient_id</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>도봉구</td>
      <td>118</td>
    </tr>
    <tr>
      <th>1</th>
      <td>동대문구</td>
      <td>197</td>
    </tr>
    <tr>
      <th>2</th>
      <td>동작구</td>
      <td>419</td>
    </tr>
    <tr>
      <th>3</th>
      <td>은평구</td>
      <td>197</td>
    </tr>
    <tr>
      <th>4</th>
      <td>강북구</td>
      <td>164</td>
    </tr>
    <tr>
      <th>5</th>
      <td>강동구</td>
      <td>153</td>
    </tr>
    <tr>
      <th>6</th>
      <td>강남구</td>
      <td>419</td>
    </tr>
    <tr>
      <th>7</th>
      <td>강서구</td>
      <td>191</td>
    </tr>
    <tr>
      <th>8</th>
      <td>금천구</td>
      <td>148</td>
    </tr>
    <tr>
      <th>9</th>
      <td>구로구</td>
      <td>249</td>
    </tr>
    <tr>
      <th>10</th>
      <td>관악구</td>
      <td>531</td>
    </tr>
    <tr>
      <th>11</th>
      <td>광진구</td>
      <td>57</td>
    </tr>
    <tr>
      <th>12</th>
      <td>종로구</td>
      <td>149</td>
    </tr>
    <tr>
      <th>13</th>
      <td>중구</td>
      <td>151</td>
    </tr>
    <tr>
      <th>14</th>
      <td>중랑구</td>
      <td>298</td>
    </tr>
    <tr>
      <th>15</th>
      <td>마포구</td>
      <td>171</td>
    </tr>
    <tr>
      <th>16</th>
      <td>노원구</td>
      <td>153</td>
    </tr>
    <tr>
      <th>17</th>
      <td>서초구</td>
      <td>187</td>
    </tr>
    <tr>
      <th>18</th>
      <td>서대문구</td>
      <td>129</td>
    </tr>
    <tr>
      <th>19</th>
      <td>성북구</td>
      <td>76</td>
    </tr>
    <tr>
      <th>20</th>
      <td>성동구</td>
      <td>181</td>
    </tr>
    <tr>
      <th>21</th>
      <td>송파구</td>
      <td>250</td>
    </tr>
    <tr>
      <th>22</th>
      <td>양천구</td>
      <td>269</td>
    </tr>
    <tr>
      <th>23</th>
      <td>영등포구</td>
      <td>216</td>
    </tr>
    <tr>
      <th>24</th>
      <td>용산구</td>
      <td>183</td>
    </tr>
  </tbody>
</table>
</div>




```python
fl = floating.groupby(['city']).mean()['fp_num'].to_frame().reset_index()
fl
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>city</th>
      <th>fp_num</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Dobong-gu</td>
      <td>20048.519082</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Dongdaemun-gu</td>
      <td>24221.652148</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Dongjag-gu</td>
      <td>26070.771110</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Eunpyeong-gu</td>
      <td>28041.551899</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Gangbuk-gu</td>
      <td>19911.660444</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Gangdong-gu</td>
      <td>27832.631361</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Gangnam-gu</td>
      <td>48831.048811</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Gangseo-gu</td>
      <td>36899.837528</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Geumcheon-gu</td>
      <td>18908.174087</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Guro-gu</td>
      <td>29579.639795</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Gwanak-gu</td>
      <td>32990.330706</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Gwangjin-gu</td>
      <td>23829.569045</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Jongno-gu</td>
      <td>17906.022308</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Jung-gu</td>
      <td>18241.025304</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Jungnang-gu</td>
      <td>24649.747649</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Mapo-gu</td>
      <td>28341.201143</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Nowon-gu</td>
      <td>33197.496774</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Seocho-gu</td>
      <td>34212.159154</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Seodaemun-gu</td>
      <td>21205.910306</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Seongbuk-gu</td>
      <td>28185.835177</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Seongdong-gu</td>
      <td>21345.661182</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Songpa-gu</td>
      <td>43351.922474</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Yangcheon-gu</td>
      <td>27386.343105</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Yeongdeungpo-gu</td>
      <td>32800.775719</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Yongsan-gu</td>
      <td>17684.644635</td>
    </tr>
  </tbody>
</table>
</div>




```python
fl['city'] = ['도봉구','동대문구','동작구','은평구','강북구','강동구','강남구','강서구','금천구','구로구','관악구','광진구','종로구','중구',
'중랑구','마포구','노원구','서초구','서대문구','성북구','성동구','송파구','양천구','영등포구','용산구']
fl
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>city</th>
      <th>fp_num</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>도봉구</td>
      <td>20048.519082</td>
    </tr>
    <tr>
      <th>1</th>
      <td>동대문구</td>
      <td>24221.652148</td>
    </tr>
    <tr>
      <th>2</th>
      <td>동작구</td>
      <td>26070.771110</td>
    </tr>
    <tr>
      <th>3</th>
      <td>은평구</td>
      <td>28041.551899</td>
    </tr>
    <tr>
      <th>4</th>
      <td>강북구</td>
      <td>19911.660444</td>
    </tr>
    <tr>
      <th>5</th>
      <td>강동구</td>
      <td>27832.631361</td>
    </tr>
    <tr>
      <th>6</th>
      <td>강남구</td>
      <td>48831.048811</td>
    </tr>
    <tr>
      <th>7</th>
      <td>강서구</td>
      <td>36899.837528</td>
    </tr>
    <tr>
      <th>8</th>
      <td>금천구</td>
      <td>18908.174087</td>
    </tr>
    <tr>
      <th>9</th>
      <td>구로구</td>
      <td>29579.639795</td>
    </tr>
    <tr>
      <th>10</th>
      <td>관악구</td>
      <td>32990.330706</td>
    </tr>
    <tr>
      <th>11</th>
      <td>광진구</td>
      <td>23829.569045</td>
    </tr>
    <tr>
      <th>12</th>
      <td>종로구</td>
      <td>17906.022308</td>
    </tr>
    <tr>
      <th>13</th>
      <td>중구</td>
      <td>18241.025304</td>
    </tr>
    <tr>
      <th>14</th>
      <td>중랑구</td>
      <td>24649.747649</td>
    </tr>
    <tr>
      <th>15</th>
      <td>마포구</td>
      <td>28341.201143</td>
    </tr>
    <tr>
      <th>16</th>
      <td>노원구</td>
      <td>33197.496774</td>
    </tr>
    <tr>
      <th>17</th>
      <td>서초구</td>
      <td>34212.159154</td>
    </tr>
    <tr>
      <th>18</th>
      <td>서대문구</td>
      <td>21205.910306</td>
    </tr>
    <tr>
      <th>19</th>
      <td>성북구</td>
      <td>28185.835177</td>
    </tr>
    <tr>
      <th>20</th>
      <td>성동구</td>
      <td>21345.661182</td>
    </tr>
    <tr>
      <th>21</th>
      <td>송파구</td>
      <td>43351.922474</td>
    </tr>
    <tr>
      <th>22</th>
      <td>양천구</td>
      <td>27386.343105</td>
    </tr>
    <tr>
      <th>23</th>
      <td>영등포구</td>
      <td>32800.775719</td>
    </tr>
    <tr>
      <th>24</th>
      <td>용산구</td>
      <td>17684.644635</td>
    </tr>
  </tbody>
</table>
</div>




```python
#merge shapefile data and confirmed patients data
merge = seoul.set_index('SIG_KOR_NM').join(fl.set_index('city')).join(pat.set_index('city'))
```


```python
merge
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>geometry</th>
      <th>BAS_MGT_SN</th>
      <th>CTP_KOR_NM</th>
      <th>BAS_ID</th>
      <th>BAS_AR</th>
      <th>NTFC_DE</th>
      <th>MVMN_DE</th>
      <th>MVMN_RESN</th>
      <th>OPERT_DE</th>
      <th>fp_num</th>
      <th>patient_id</th>
    </tr>
    <tr>
      <th>SIG_KOR_NM</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>종로구</th>
      <td>POLYGON ((953116.139 1952230.380, 953110.416 1...</td>
      <td>1111000027</td>
      <td>서울특별시</td>
      <td>03165</td>
      <td>0.085469</td>
      <td>20161027</td>
      <td>20161027</td>
      <td>통합에 의한 기초구역 변경</td>
      <td>20161027000000</td>
      <td>17906.022308</td>
      <td>149</td>
    </tr>
    <tr>
      <th>중구</th>
      <td>POLYGON ((952809.166 1950668.687, 952807.995 1...</td>
      <td>1114000007</td>
      <td>서울특별시</td>
      <td>04509</td>
      <td>0.136612</td>
      <td>20121221</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>18241.025304</td>
      <td>151</td>
    </tr>
    <tr>
      <th>용산구</th>
      <td>POLYGON ((955433.677 1946450.477, 955433.677 1...</td>
      <td>1117000007</td>
      <td>서울특별시</td>
      <td>04382</td>
      <td>0.165194</td>
      <td>20121221</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>17684.644635</td>
      <td>183</td>
    </tr>
    <tr>
      <th>성동구</th>
      <td>POLYGON ((961382.291 1949073.897, 961232.021 1...</td>
      <td>1120000055</td>
      <td>서울특별시</td>
      <td>04804</td>
      <td>0.117056</td>
      <td>20121221</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>21345.661182</td>
      <td>181</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>POLYGON ((964806.966 1948611.430, 964805.862 1...</td>
      <td>1121500031</td>
      <td>서울특별시</td>
      <td>05029</td>
      <td>0.458800</td>
      <td>20121221</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>23829.569045</td>
      <td>57</td>
    </tr>
    <tr>
      <th>동대문구</th>
      <td>POLYGON ((958998.159 1952616.852, 958998.159 1...</td>
      <td>1123000019</td>
      <td>서울특별시</td>
      <td>02621</td>
      <td>0.015395</td>
      <td>20121221</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>24221.652148</td>
      <td>197</td>
    </tr>
    <tr>
      <th>중랑구</th>
      <td>POLYGON ((964031.458 1952398.334, 964031.379 1...</td>
      <td>1126000025</td>
      <td>서울특별시</td>
      <td>02182</td>
      <td>0.021777</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>24649.747649</td>
      <td>298</td>
    </tr>
    <tr>
      <th>성북구</th>
      <td>POLYGON ((957895.238 1953292.145, 957895.236 1...</td>
      <td>1129000099</td>
      <td>서울특별시</td>
      <td>02726</td>
      <td>0.085000</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>28185.835177</td>
      <td>76</td>
    </tr>
    <tr>
      <th>강북구</th>
      <td>POLYGON ((958049.731 1957074.414, 958049.729 1...</td>
      <td>1130500089</td>
      <td>서울특별시</td>
      <td>01025</td>
      <td>0.069795</td>
      <td>20121221</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>19911.660444</td>
      <td>164</td>
    </tr>
    <tr>
      <th>도봉구</th>
      <td>POLYGON ((959622.731 1959294.137, 959622.731 1...</td>
      <td>1132000055</td>
      <td>서울특별시</td>
      <td>01453</td>
      <td>0.052713</td>
      <td>20121221</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>20048.519082</td>
      <td>118</td>
    </tr>
    <tr>
      <th>노원구</th>
      <td>POLYGON ((962425.545 1957584.779, 962425.532 1...</td>
      <td>1135000298</td>
      <td>서울특별시</td>
      <td>01887</td>
      <td>0.182795</td>
      <td>20161027</td>
      <td>20161027</td>
      <td>기초구역 경계 변경에 의한 기초구역 변경</td>
      <td>20161027000000</td>
      <td>33197.496774</td>
      <td>153</td>
    </tr>
    <tr>
      <th>은평구</th>
      <td>POLYGON ((948739.136 1953919.798, 948739.136 1...</td>
      <td>1138000012</td>
      <td>서울특별시</td>
      <td>03326</td>
      <td>0.059270</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>28041.551899</td>
      <td>197</td>
    </tr>
    <tr>
      <th>서대문구</th>
      <td>POLYGON ((952384.227 1951154.295, 952384.227 1...</td>
      <td>1141000025</td>
      <td>서울특별시</td>
      <td>03772</td>
      <td>0.014529</td>
      <td>20161027</td>
      <td>20161027</td>
      <td>기초구역 경계 변경에 의한 기초구역 변경</td>
      <td>20161027000000</td>
      <td>21205.910306</td>
      <td>129</td>
    </tr>
    <tr>
      <th>마포구</th>
      <td>POLYGON ((951983.776 1949146.598, 951983.776 1...</td>
      <td>1144000002</td>
      <td>서울특별시</td>
      <td>04178</td>
      <td>0.047000</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>28341.201143</td>
      <td>171</td>
    </tr>
    <tr>
      <th>양천구</th>
      <td>POLYGON ((944726.636 1945535.481, 944715.100 1...</td>
      <td>1147000040</td>
      <td>서울특별시</td>
      <td>08036</td>
      <td>0.076000</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>27386.343105</td>
      <td>269</td>
    </tr>
    <tr>
      <th>강서구</th>
      <td>POLYGON ((942088.754 1947743.337, 942022.546 1...</td>
      <td>1150000111</td>
      <td>서울특별시</td>
      <td>07512</td>
      <td>0.060000</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>36899.837528</td>
      <td>191</td>
    </tr>
    <tr>
      <th>구로구</th>
      <td>POLYGON ((940908.081 1942254.473, 940908.081 1...</td>
      <td>1153000139</td>
      <td>서울특별시</td>
      <td>08249</td>
      <td>0.494770</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>29579.639795</td>
      <td>249</td>
    </tr>
    <tr>
      <th>금천구</th>
      <td>POLYGON ((947912.120 1937720.463, 947913.474 1...</td>
      <td>1154500038</td>
      <td>서울특별시</td>
      <td>08610</td>
      <td>0.027250</td>
      <td>20161027</td>
      <td>20161027</td>
      <td>기초구역 경계 변경에 의한 기초구역 변경</td>
      <td>20161027000000</td>
      <td>18908.174087</td>
      <td>148</td>
    </tr>
    <tr>
      <th>영등포구</th>
      <td>POLYGON ((947429.183 1943319.013, 947429.183 1...</td>
      <td>1156000224</td>
      <td>서울특별시</td>
      <td>07395</td>
      <td>0.075187</td>
      <td>20171215</td>
      <td>20171215</td>
      <td>기초구역 경계 변경에 의한 기초구역 변경</td>
      <td>20171215000000</td>
      <td>32800.775719</td>
      <td>216</td>
    </tr>
    <tr>
      <th>동작구</th>
      <td>POLYGON ((947660.499 1943082.625, 947660.499 1...</td>
      <td>1159000058</td>
      <td>서울특별시</td>
      <td>07038</td>
      <td>0.108059</td>
      <td>20121221</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>26070.771110</td>
      <td>419</td>
    </tr>
    <tr>
      <th>관악구</th>
      <td>POLYGON ((952624.239 1938480.594, 952615.221 1...</td>
      <td>1162000109</td>
      <td>서울특별시</td>
      <td>08718</td>
      <td>0.132414</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>32990.330706</td>
      <td>531</td>
    </tr>
    <tr>
      <th>서초구</th>
      <td>POLYGON ((955451.830 1940940.912, 955454.597 1...</td>
      <td>1165000118</td>
      <td>서울특별시</td>
      <td>06682</td>
      <td>0.026562</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>34212.159154</td>
      <td>187</td>
    </tr>
    <tr>
      <th>강남구</th>
      <td>POLYGON ((961311.983 1941214.011, 961311.983 1...</td>
      <td>1168000369</td>
      <td>서울특별시</td>
      <td>06002</td>
      <td>0.331059</td>
      <td>20121221</td>
      <td>20121221</td>
      <td>국가기초구역 최초생성</td>
      <td>20121221000000</td>
      <td>48831.048811</td>
      <td>419</td>
    </tr>
    <tr>
      <th>송파구</th>
      <td>POLYGON ((969820.108 1943727.608, 969820.108 1...</td>
      <td>1171000018</td>
      <td>서울특별시</td>
      <td>05814</td>
      <td>0.267271</td>
      <td>20161027</td>
      <td>20161027</td>
      <td>행정구역 변경에 의한 기초구역 변경</td>
      <td>20161027000000</td>
      <td>43351.922474</td>
      <td>250</td>
    </tr>
    <tr>
      <th>강동구</th>
      <td>POLYGON ((968698.568 1947019.408, 968698.568 1...</td>
      <td>1174000063</td>
      <td>서울특별시</td>
      <td>05353</td>
      <td>0.059925</td>
      <td>20121221</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>27832.631361</td>
      <td>153</td>
    </tr>
  </tbody>
</table>
</div>




```python
var1 = 'fp_num'
var2 = 'patient_id'
vmin, vmax = 100,200
fig, (ax1, ax2) = plt.subplots(ncols = 2,figsize=(22,8))
ax1 = merge.plot(column=var1, cmap='BuGn', linewidth=0.8, ax=ax1, edgecolor='0.8',legend=True)
ax2 = merge.plot(column=var2, cmap='BuGn', linewidth=0.8, ax=ax2, edgecolor='0.8',legend=True)
ax1.set_title('Seoul Floating')
ax2.set_title('COVID Patients')
ax1.axis('off')
ax2.axis('off')
sm = plt.cm.ScalarMappable(cmap='BuGn')
```


![png](/images/COVID_files/COVID_91_0.png)


Although the correlation between # of floating people and # of patients doesn't seem high, there is an overall similarity. (Example - Seocho, Gangnam, Songpa...)
